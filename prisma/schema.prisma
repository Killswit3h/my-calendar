generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model customer {
  id           Int       @id
  name         String    @unique @db.VarChar
  address      String    @db.VarChar
  phone_number String    @db.VarChar
  email        String    @unique @db.VarChar
  notes        String?
  created_at   DateTime? @default(now()) @db.Timestamp(6)
  project      project[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model employee {
  id               Int                @id
  name             String             @db.VarChar
  wage_rate        Decimal            @db.Decimal
  start_date       DateTime           @db.Timestamp(6)
  last_updated     DateTime?          @db.Timestamp(6)
  phone_number     String?            @db.VarChar
  email            String?            @unique @db.VarChar
  active           Boolean?           @default(true)
  event_assignment event_assignment[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model event {
  id               Int                @id
  project_id       Int
  scope_of_work_id Int
  payment_type_id  Int
  invoice_id       Int?
  start_time       DateTime           @db.Timestamp(6)
  end_time         DateTime           @db.Timestamp(6)
  is_day_shift     Boolean?           @default(true)
  location         String?            @db.VarChar
  notes            String?
  created_at       DateTime?          @default(now()) @db.Timestamp(6)
  updated_at       DateTime?          @default(now()) @db.Timestamp(6)
  invoice          invoice?           @relation(fields: [invoice_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  payment_type     payment_type       @relation(fields: [payment_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project          project            @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  scope_of_work    scope_of_work      @relation(fields: [scope_of_work_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  event_assignment event_assignment[]
  event_quantity   event_quantity[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model event_assignment {
  id          Int      @id
  event_id    Int
  employee_id Int
  employee    employee @relation(fields: [employee_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  event       event    @relation(fields: [event_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([event_id, employee_id], map: "event_assignment_event_id_employee_id_idx")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model event_quantity {
  id                  Int              @id
  event_id            Int
  project_pay_item_id Int
  quantity            Decimal          @db.Decimal
  notes               String?
  event               event            @relation(fields: [event_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_pay_item    project_pay_item @relation(fields: [project_pay_item_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model invoice {
  id                  Int      @id
  number              String   @unique @db.VarChar
  is_contract_invoice Boolean? @default(false)
  event               event[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model pay_item {
  id               Int                @id
  number           String             @unique @db.VarChar
  description      String
  unit             String             @db.VarChar
  project_pay_item project_pay_item[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model payment_type {
  id          Int     @id
  description String  @unique @db.VarChar
  event       event[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model project {
  id               Int                @id
  customer_id      Int?
  name             String             @unique @db.VarChar
  location         String             @db.VarChar
  retainage        Decimal            @db.Decimal
  is_payroll       Boolean?           @default(false)
  is_EEO           Boolean?           @default(false)
  vendor           String             @db.VarChar
  status           String?            @default("ACTIVE") @db.VarChar
  created_at       DateTime?          @default(now()) @db.Timestamp(6)
  updated_at       DateTime?          @default(now()) @db.Timestamp(6)
  event            event[]
  customer         customer?          @relation(fields: [customer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project_pay_item project_pay_item[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model project_pay_item {
  id                  Int              @id
  project_id          Int
  pay_item_id         Int
  contracted_quantity Decimal          @db.Decimal
  unit_rate           Decimal          @db.Decimal
  is_original         Boolean?         @default(true)
  stockpile_billed    Decimal?         @default(0) @db.Decimal
  notes               String?
  begin_station       String?          @db.VarChar
  end_station         String?          @db.VarChar
  status              String?          @db.VarChar
  locate_ticket       String?          @db.VarChar
  LF_RT               String?          @db.VarChar
  onsite_review       String?          @db.VarChar
  event_quantity      event_quantity[]
  pay_item            pay_item         @relation(fields: [pay_item_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  project             project          @relation(fields: [project_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model scope_of_work {
  id          Int     @id
  description String  @unique @db.VarChar
  event       event[]
}
